FROM node:10.12.0-alpine
MAINTAINER work.bijoypaul@gmail.com
ENV NODE_ENV production
# ARG WRITER_HOST=localhost
# ARG READER_HOST=localhost
# ARG WRITER_PORT=8081
# ARG READER_PORT=8080

ENV WRITER_HOST $WRITER_HOST
ENV READER_HOST $READER_HOST
ENV WRITER_PORT $WRITER_PORT
ENV READER_PORT $READER_PORT

WORKDIR /app
ADD . .
RUN npm install && npm audit fix && npm run build

CMD npm start